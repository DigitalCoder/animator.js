/*!
 * Animator.js - v0.0.3
 * @author Gao Sun
 * @license MIT
 * @homepage https://gao-sun.github.io/animatorjs
 */
var Animator=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.convertToObject=function(e){var t=e.substring(e.indexOf("{")+1).trim().slice(0,-1),i={};return t.split(";").map(function(e){if(e=e.trim()){var t=e.split(":");i[t[0].trim()]=t[1].trim()}}),i},n.getFromSheets=function(e){var t=document.styleSheets;for(var i in t){var r=t[i].rules||t[i].cssRules;if(r)for(var s in r)if(r[s].selectorText&&r[s].selectorText.split(",").indexOf(e)!=-1)return r[s].cssText?n.convertToObject(r[s].cssText):n.convertToObject(r[s].style.cssText)}return{}},n.getPropertyDefault=function(e){return"timing-function"==e?"ease":"iteration-count"==e?1:"direction"==e?"normal":"fill-mode"==e?"none":null},t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.generateId=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<8;++i)e+=t.charAt(Math.floor(Math.random()*t.length));return e},n.frameToString=function(e){var t="";for(var i in e)t+=i+":"+e[i]+";";return t},n.convertTimeToMs=function(e){if(!e)return 0;if("number"==typeof e)return e;var t=parseFloat(e);return e.indexOf("ms")!=-1?t:1e3*t},n.prefixes=["","-webkit-","-moz-","-o-"],t.default=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),o=n(s),a=function e(t,i){if(r(this,e),this.styles="string"==typeof t?o.default.getFromSheets(t):t,"string"==typeof i){var n=o.default.getFromSheets(i);this.options={};for(var s in n)this.options[s.replace("animation-","")]=n[s]}else this.options="number"==typeof i?{duration:i}:i};t.default=a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(4),a=n(o),u=i(1),f=n(u),l=i(0),m=n(l),h=function(){function e(t,i,n,s){if(r(this,e),t.constructor===Array?this.doms=t:this.doms=[t],i.constructor===Array?this.frames=i:this.frames=[i],this.options={startFrom:0,pauseAt:[],prefix:!1,count:1,clear:!0,applyOnEnd:!1,instant:!1},null!=n&&void 0!=n)if("boolean"==typeof n)this.options.instant=n;else if("number"==typeof n)this.options.count=n,"boolean"==typeof s&&(this.options.instant=s);else for(var o in n)"pauseAt"==o&&n.pauseAt.constructor!==Array?this.options[o]=[n[o]]:this.options[o]=n[o];this.promiseSupported="undefined"!=typeof Promise&&Promise.toString().indexOf("[native code]")!==-1,this.countRemainder=[],this.animations=[],this.styleDoms=[],this.superSets=[],this.eventHandler=[],this.options.prefix?this.prefixes=f.default.prefixes:this.prefixes=[""];for(var a in t)this.countRemainder[a]=this.options.count-1;if(this.options.instant)return this.play()}return s(e,[{key:"play",value:function(){var e=this;this.clear(),this.promiseSupported&&(this.promise=new Promise(function(t){e.promiseResolve=t}));for(var t in this.doms){var i=this.makeAnimation(this.doms[t]);this.animations[t]=i.names,this.styleDoms[t]=i.styleDom,this.superSets[t]=this.makeSuperSet(this.doms[t],this.animations[t]),this.playAnimation(this.doms[t],this.superSets[t]),this.eventHandler[t]=this.handleAnimationEnd.bind(this,t),this.doms[t].addEventListener("animationend",this.eventHandler[t])}if(this.promiseSupported)return this.promise}},{key:"clear",value:function(e){if(!e){for(var t in this.doms)this.clear(t);return this.animationEnded=0,this.promise=void 0,void(this.promiseResolve=void 0)}var i=this.styleDoms[e];i&&i.parentNode&&i.parentNode.removeChild(i);for(var n in this.superSets[e])for(var r in this.prefixes)this.doms[e].style[this.prefixes[r]+"animation-"+n]=null;for(var s in this.prefixes)this.doms[e].style[this.prefixes[s]+"animation-play-state"]=null;this.doms[e].removeEventListener("animationend",this.eventHandler[e]),this.countRemainder[e]=this.options.count-1}},{key:"replay",value:function(e){var t=this.doms[e],i=t.cloneNode(!0);t.parentNode.replaceChild(i,t),this.doms[e].removeEventListener("animationend",this.eventHandler[e]),this.doms[e]=i,this.doms[e].addEventListener("animationend",this.eventHandler[e])}},{key:"pause",value:function(){for(var e in this.doms)this.pauseDom(this.doms[e])}},{key:"resume",value:function(){for(var e in this.doms)this.resumeDom(this.doms[e])}},{key:"handleAnimationEnd",value:function(e,t){var i=t.animationName,n=i.substring(i.lastIndexOf("-")+1);this.options.pauseAt.includes(parseInt(n))&&this.pauseDom(this.doms[e]),n==this.frames.length&&(this.countRemainder[e]==-1?this.replay(e):this.countRemainder[e]>0?(this.countRemainder[e]--,this.replay(e)):(this.options.applyOnEnd&&this.applyOnEnd(e),++this.animationEnded==this.doms.length&&(this.promiseSupported&&this.promiseResolve(),this.options.clear&&this.clear())))}},{key:"pauseDom",value:function(e){for(var t in this.prefixes)e.style[this.prefixes[t]+"animation-play-state"]="paused"}},{key:"resumeDom",value:function(e){for(var t in this.prefixes)e.style[this.prefixes[t]+"animation-play-state"]="running"}},{key:"applyOnEnd",value:function(e){var t=this.newFrames[this.frames.length];for(var i in t)this.doms[e].style[i]=t[i]}},{key:"makeAnimation",value:function(e){var t={},i=[],n={};for(var r in this.frames){i.push(this.frames[r].styles);for(var s in i[r])n[s]=!0}var o=window.getComputedStyle(e);for(var u in n)t[u]=o[u];i.unshift(t);for(var f=[i[0]],l=1;l<i.length;++l){var m=JSON.parse(JSON.stringify(i[l-1]));for(var h in i[l])m[h]=i[l][h];f.push(m)}return this.newFrames=f,a.default.make(f,this.prefixes)}},{key:"makeSuperSet",value:function(e,t){var i=0,n={};for(var r in this.frames)for(var s in this.frames[r].options)n[s]="";n.name="",n.duration="",n.delay="";for(var o=0;o<this.frames.length;++o){if(o)for(var a in n)n[a]+=",";var u=f.default.convertTimeToMs(this.frames[o].options.duration),l=f.default.convertTimeToMs(this.frames[o].options.delay);o<this.options.startFrom&&(u=0,l=0),n.name+=t[o],n.duration+=u+"ms",n.delay+=i+l+"ms";for(var h in n)"name"!=h&&"duration"!=h&&"delay"!=h&&(n[h]+=this.frames[o].options[h]?this.frames[o].options[h]:m.default.getPropertyDefault(h));var d=this.frames[o].options["iteration-count"];i+=u*parseInt(d?d:1)+l}return n}},{key:"playAnimation",value:function(e,t){for(var i in t)for(var n in this.prefixes)e.style[this.prefixes[n]+"animation-"+i]=t[i];this.options.pauseAt.includes(0)&&this.pauseDom(e)}}]),e}();t.default=h},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),s=n(r),o={};o.make=function(e,t){for(var i=[],n="",r="atr-"+s.default.generateId(),a=document.createElement("style"),u=0;u<e.length-1;++u)i.push(r+"-"+(u+1)),n+=o.makeFromTwoFrames(e[u],e[u+1],i[u],t);return a.innerHTML=n,a.class="foo",document.getElementsByTagName("head")[0].appendChild(a),{names:i,styleDom:a}},o.makeFromTwoFrames=function(e,t,i,n){var r="";for(var o in n)r+="@"+n[o]+"keyframes "+i+" {",r+="0%",r+="{"+s.default.frameToString(e)+"}",r+="100%",r+="{"+s.default.frameToString(t)+"}",r+="}";return r},t.default=o},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=t.Frame=void 0;var r=i(2),s=n(r),o=i(3),a=n(o);t.Frame=s.default,t.Queue=a.default}]);